<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: alarm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: alarm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file скрипт для страницы с будильниками
 * @author Evgenii Reshetnikov
 */

/**
 * @description переменная alarms, массив будильников
 */
var alarms=[];


/**
 * @description printAlarm() function places layout of alarm on the page
 */
function printAlarm(){
    
    let inner="";
    alarms.forEach((item,index)=>{
        enable = item.isEnable == 1?"green":"red";
        inner = inner + 
            "&lt;li> &lt;span class='" + enable + "'>" + 
            item.time + 
            " &lt;/span> - "+
            "&lt;a href='#' class='off' data-index='" + index + "'>Выкл.&lt;/a> / "+
            "&lt;a href='#' class='on' data-index='" + index + "'>Вкл.&lt;/a> / "+
            "&lt;/li>";
    });
    $('.alarms-list').html(inner);
    $('.alarms-list').on('click','.off',(e)=>{
        let idx = $(e.target).data('index');
        alarms[idx].isEnable = 0;
        printAlarm();
    });
    $('.alarms-list').on('click','.on',(e)=>{
        let idx = $(e.target).data('index');
        alarms[idx].isEnable = 1;
        printAlarm();
    });
}
$( document ).ready(function() {
    $('.add-alarm').click(function(){
        alarms.push({time:$('input[name="time"]').val(),isEnable:1});
        printAlarm();
    });
});


//
/**
 * @description checkTime() add "0" to each number of time for special time-format
 * @param (string) i-время.
 */
function checkTime(i) {
    if (i &lt; 10) {
      i = "0" + i;
    }
    return i;
  }

/**
 * @description getCurrentTime() takes minute and hour from system and places them into time-format
 */
  function getCurrentTime() {
    var today = new Date();
    var h = today.getHours();
    var m = today.getMinutes();
    // add a zero in front of numbers&lt;10
    h = checkTime(h);
    m = checkTime(m);
    return h + ":" + m;
  }

/**
 * @description setInterval check each alarm if its time is equal current time
 */
    setInterval(()=>{
    alarms.forEach((item)=>{
        if(getCurrentTime() == item.time &amp;&amp; item.isEnable == 1)
            alert("Сработал будильник в " + item);
    });
},60000);

module.exports = { checkTime }</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#alarms">alarms</a></li><li><a href="global.html#checkTime">checkTime</a></li><li><a href="global.html#getCurrentTime">getCurrentTime</a></li><li><a href="global.html#printAlarm">printAlarm</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Fri Dec 30 2022 11:26:48 GMT+0400 (Самарское стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
